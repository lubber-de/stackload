/**
 * StackLoad - A tiny JS/CSS module loader that simply does its job.
 *
 * @link       https://gitlab.com/lubber/stackload
 * @copyright  Copyright (c) 2017 Marco 'Lubber' Wienkoop
 * @license    GPLv3 https://gitlab.com/lubber/stackload/blob/master/LICENSE

 */
!function(window,document){var registry=[],fullStack=[],currentLoadIndex=0,callBacks=[],stopAll=!1,stackLoadError=function(e){window.console&&console.error("[StackLoad Error] Missing file: "+(e.target.src?e.target.src:e.target.href)),!1===callBacks[0].error(e)&&(stopAll=!0);var t=e.target;t.parentNode.removeChild(t),stackLoadDone(e)},stackLoadDone=function(e){var t=e.target;if(t.removeEventListener("error",stackLoadError),t.removeEventListener("load",stackLoadDone),currentLoadIndex++,t.jsonp&&t.parentNode&&t.parentNode.removeChild(t),stopAll){var r=callBacks[0].doneIndex-currentLoadIndex;r>0&&(fullStack.splice(currentLoadIndex,r),callBacks.shift(),callBacks.forEach(function(e,t,n){n[t].doneIndex-=r}))}else currentLoadIndex===callBacks[0].doneIndex&&(callBacks[0].success(),callBacks.shift()),currentLoadIndex===fullStack.length||stopAll||loadSingle()},loadSingle=function(){var o=fullStack[currentLoadIndex];try{if(!o.check||void 0===eval(o.check)){var element;o.type&&"css"===o.type?(element=document.createElement("link"),element.type="text/css",element.rel="stylesheet",element.href=o.url):(element=document.createElement("script"),element.type="text/javascript",element.src=o.url,element.async=!1,o.type&&"jsonp"===o.type&&(element.jsonp=!0)),document.head.appendChild(element),element.addEventListener("load",stackLoadDone),element.addEventListener("error",stackLoadError)}}catch(e){}},setup=function(e){if("string"==typeof e||e.url?e={files:[e]}:Array.isArray(e)&&(e={files:e}),e.files){var t=[];("string"==typeof e.files||e.files.url)&&(e.files=[e.files]),e.files.forEach(function(e){if("string"==typeof e&&(e={url:e}),e.url&&-1===registry.indexOf(e.url)){if(!e.type){var r=e.url.match(/\.([0-9a-zA-Z]+)(?:[?#]|$)/i);r&&(e.type=r[1].toLowerCase())}if("jsonp"===e.type.toLowerCase()){var n=(new Date).getTime();e.url.match(/\?/)?e.url+="&_="+n:e.url+="?_="+n}t.push(e),registry.push(e.url)}});var r=t.length;if("function"!=typeof e.success&&(e.success=function(){}),r>0){var n=(fullStack=fullStack.concat(t)).length;"function"!=typeof e.error&&(e.error=function(){}),callBacks.push({doneIndex:n,success:e.success,error:e.error}),currentLoadIndex===n-r&&loadSingle()}else e.success()}};window.stackLoad=function(e){if(stopAll=!1,0===registry.length){var t,r=document.querySelectorAll("link,script");for(t=0;t<r.length;t++)r[t].src?registry.push(r[t].src):r[t].href&&registry.push(r[t].href)}return setup(e),{then:function(e){return setup(e),this}}}}(window,document);