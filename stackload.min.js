/**
 * StackLoad - A tiny JS/CSS module loader that simply does its job.
 *
 * @link       https://gitlab.com/lubber/stackload
 * @copyright  Copyright (c) 2017 Marco 'Lubber' Wienkoop
 * @license    MIT https://gitlab.com/lubber/stackload/blob/master/LICENSE

 */
!function(window,document){var registry=[],fullStack=[],currentLoadIndex=0,callBacks=[],stopAll=!1,continueStack=function(){++currentLoadIndex===callBacks[0].doneIndex&&(callBacks[0].success(),callBacks.shift()),currentLoadIndex===fullStack.length||stopAll||loadSingle()},stackLoadError=function(e){var r=e.target;console.error("[StackLoad Error] Missing file: "+(r.src?r.src:r.href)),!1===callBacks[0].error(e)&&(stopAll=!0),r.parentNode.removeChild(r),stackLoadDone(e)},stackLoadDone=function(e){var r,t=e.target;t.removeEventListener("error",stackLoadError),t.removeEventListener("load",stackLoadDone),t.jsonp&&t.parentNode&&t.parentNode.removeChild(t),stopAll?(r=callBacks[0].doneIndex-++currentLoadIndex)>0&&(fullStack.splice(currentLoadIndex,r),callBacks.shift(),callBacks.forEach(function(e,t,s){s[t].doneIndex-=r})):(t.href&&searchCssImport(document.styleSheets[document.styleSheets.length-1]),continueStack())},loadSingle=function(){var o=fullStack[currentLoadIndex],s;try{!o.check||""!==o.check&&!eval(o.check)?(o.type&&"css"===o.type?(s=document.createElement("link"),s.type="text/css",s.rel="stylesheet",s.href=o.url):(s=document.createElement("script"),s.type="text/javascript",s.src=o.url,s.async=!1,o.type&&"jsonp"===o.type&&(s.jsonp=!0)),document.head.appendChild(s),s.addEventListener("load",stackLoadDone),s.addEventListener("error",stackLoadError)):continueStack()}catch(e){console.error(e),continueStack()}},setup=function(e){if(void 0!==e&&("string"==typeof e||e.url?e={files:[e]}:Array.isArray(e)&&(e={files:e}),e.files)){var r=[];("string"==typeof e.files||e.files.url)&&(e.files=[e.files]),e.files.forEach(function(e){if("string"==typeof e&&(e={url:e}),e.url&&-1===registry.indexOf(e.url)){if(!e.type){var t=e.url.match(/\.([0-9a-zA-Z]+)(?:[?#]|$)/i);t&&(e.type=t[1].toLowerCase())}if("jsonp"===e.type.toLowerCase()||e.noCache){var s=(new Date).getTime();e.url.match(/\?/)?e.url+="&_="+s:e.url+="?_="+s}r.push(e),registry.push(e.url)}});var t=r.length;if("function"!=typeof e.success&&(e.success=function(){}),t>0){var s=(fullStack=fullStack.concat(r)).length;"function"!=typeof e.error&&(e.error=function(){}),callBacks.push({doneIndex:s,success:e.success,error:e.error}),currentLoadIndex===s-t&&loadSingle()}else e.success()}},searchCssImport=function(e){try{if(e.cssRules)for(var r=0,t=e.cssRules.length;r<t;r++)e.cssRules[r].href&&-1===registry.indexOf(e.cssRules[r].href)&&registry.push(e.cssRules[r].href)}catch(e){}},cssProperties=function(e){var r,t=document.createElement("div");return t.className=e,document.body.appendChild(t),r=JSON.parse(JSON.stringify(window.getComputedStyle(t))),t.parentNode.removeChild(t),r};window.stackLoad=function(e){if(stopAll=!1,0===registry.length){var r,t,s=document.querySelectorAll("link,script"),n=document.styleSheets;for(r=0,t=s.length;r<t;r++)s[r].src&&-1===registry.indexOf(s[r].src)?registry.push(s[r].src):s[r].href&&-1===registry.indexOf(s[r].href)&&registry.push(s[r].href);for(r=0,t=n.length;r<t;r++)searchCssImport(n[r])}return setup(e),{then:function(e){return setup(e),this}}}}(window,document);