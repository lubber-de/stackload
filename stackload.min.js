/**
 * StackLoad - A tiny JS/CSS module loader that simply does its job.
 *
 * @link       https://gitlab.com/lubber/stackload
 * @copyright  Copyright (c) 2017 Marco 'Lubber' Wienkoop
 * @license    GPLv3 https://gitlab.com/lubber/stackload/blob/master/LICENSE

 */
!function(window,document){var registry=[],fullStack=[],currentLoadIndex=0,callBacks=[],stopAll=!1,stackLoadError=function(e){window.console&&console.error("[StackLoad Error] Missing file: "+(e.target.src?e.target.src:e.target.href)),!1===callBacks[0].error(e)&&(stopAll=!0);var r=e.target;r.parentNode.removeChild(r),stackLoadDone(e)},stackLoadDone=function(e){var r=e.target;if(r.removeEventListener("error",stackLoadError),r.removeEventListener("load",stackLoadDone),currentLoadIndex++,r.jsonp&&r.parentNode&&r.parentNode.removeChild(r),stopAll){var t=callBacks[0].doneIndex-currentLoadIndex;t>0&&(fullStack.splice(currentLoadIndex,t),callBacks.shift(),callBacks.forEach(function(e,r,s){s[r].doneIndex-=t}))}else r.href&&searchCssImport(document.styleSheets[document.styleSheets.length-1]),currentLoadIndex===callBacks[0].doneIndex&&(callBacks[0].success(),callBacks.shift()),currentLoadIndex===fullStack.length||stopAll||loadSingle()},loadSingle=function(){var o=fullStack[currentLoadIndex];try{if(!o.check||void 0===eval(o.check)){var element;o.type&&"css"===o.type?(element=document.createElement("link"),element.type="text/css",element.rel="stylesheet",element.href=o.url):(element=document.createElement("script"),element.type="text/javascript",element.src=o.url,element.async=!1,o.type&&"jsonp"===o.type&&(element.jsonp=!0)),document.head.appendChild(element),element.addEventListener("load",stackLoadDone),element.addEventListener("error",stackLoadError)}}catch(e){}},setup=function(e){if(void 0!==e&&("string"==typeof e||e.url?e={files:[e]}:Array.isArray(e)&&(e={files:e}),e.files)){var r=[];("string"==typeof e.files||e.files.url)&&(e.files=[e.files]),e.files.forEach(function(e){if("string"==typeof e&&(e={url:e}),e.url&&-1===registry.indexOf(e.url)){if(!e.type){var t=e.url.match(/\.([0-9a-zA-Z]+)(?:[?#]|$)/i);t&&(e.type=t[1].toLowerCase())}if("jsonp"===e.type.toLowerCase()){var s=(new Date).getTime();e.url.match(/\?/)?e.url+="&_="+s:e.url+="?_="+s}r.push(e),registry.push(e.url)}});var t=r.length;if("function"!=typeof e.success&&(e.success=function(){}),t>0){var s=(fullStack=fullStack.concat(r)).length;"function"!=typeof e.error&&(e.error=function(){}),callBacks.push({doneIndex:s,success:e.success,error:e.error}),currentLoadIndex===s-t&&loadSingle()}else e.success()}},searchCssImport=function(e){if(e.cssRules)for(var r=0,t=e.cssRules.length;r<t;r++)e.cssRules[r].href&&-1===registry.indexOf(e.cssRules[r].href)&&registry.push(e.cssRules[r].href)};window.stackLoad=function(e){if(stopAll=!1,0===registry.length){var r,t,s=document.querySelectorAll("link,script");for(r=0,t=s.length;r<t;r++)s[r].src&&-1===registry.indexOf(s[r].src)?registry.push(s[r].src):s[r].href&&-1===registry.indexOf(s[r].href)&&registry.push(s[r].href);var n=document.styleSheets;for(r=0,t=n.length;r<t;r++)searchCssImport(n[r])}return setup(e),{then:function(e){return setup(e),this}}}}(window,document);